echo
echo "Add User"
echo
userou="OU=Users,OU=THISS"


read -p "Meno: " -e -i Meno giveName
read -p "Priezvisko: " -e -i Priezvisko surName
read -p "Heslo: " -e -i P4ssw0rd password
read -p "Office/Room: " -e -i Office office



ssam=${giveName}.${surName}
echo "$ssam" > "/root/ldif/ssamout.txt"
cat /root/ldif/ssamout.txt | perl -CS -MUnicode::Normalize -pne '$_=NFKD($_);s/\p{InDiacriticals}//g' > "/root/ldif/ssamoute.txt"
iconv -f UTF-8 -t ASCII//TRANSLIT "/root/ldif/ssamoute.txt" > "/root/ldif/ssamoutea.txt"
ssamout=$(</root/ldif/ssamoutea.txt)


function to_lower()
{
    local str="$@"
    local output
    output=$(tr '[A-Z]' '[a-z]'<<<"${str}")
    echo $output
}

usernamelow=$(to_lower ${ssamout})

username=${usernamelow}


### gName

#cho "$giveName" > "/root/ldif/givename.txt"
#conv -f UTF-8 -t UTF-8//TRANSLIT "/root/ldif/givename.txt" > "/root/ldif/givenamea.txt"
#Name=$(</root/ldif/givenamea.txt)

echo
echo " Vypluje natukane sracky"
echo

echo "Meno: " $giveName
echo "Priezvisko: " $surName
echo "Heslo: " $password
echo "Office: " $office
echo "Diaremove: " $ssamout
echo "Lower: " $usernamelow
echo "Username: " $username

echo "test: " $gName


samba-tool user create $username $password --userou $userou --given-name $giveName --surname $surName --mail-address "$username@pantheon.sk" --physical-delivery-office $office --must-change-at-next-login
